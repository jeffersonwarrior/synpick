# Repository Guidelines

## Project Structure & Module Organization
Source lives in `src/`, split by feature: `cli/` (command wiring), `core/` (app orchestration plus `SyntheticClaudeApp`), `api/` (Synthetic API bindings), `models/`, `ui/` (Ink views), `launcher/`, and `utils/`. Shared config loaders sit in `config/`. Jest specs live beside code or under `tests/` (see `tests/config.test.ts` and `tests/setup.ts`), while production bundles are emitted to `dist/`. Supporting assets (install scripts, diagnostics) sit under `scripts/` and `docker/`; do not hand-edit `dist/` because it is regenerated by the build.

## Build, Test, and Development Commands
Run `npm install` once to pull dependencies. Use `npm run dev` for ts-node execution of `src/index.ts` when iterating. `npm run build` (or `npm run build:tsc`) transpiles to `dist/cli/index.js` and ensures the CLI entry is executable; `npm start` builds then runs the compiled CLI. `npm test` runs the full Jest suite, `npm run test:watch` tails tests while you work, and `npm run test:coverage` generates `coverage/` reports consumed by CI. Lint with `npm run lint`, auto-fix with `npm run lint:fix`, and format TypeScript via `npm run format`.

## Coding Style & Naming Conventions
TypeScript stays strict and idiomatic: two-space indentation, single quotes, and no implicit `any`. Files are lowercase (kebab-case where multiword), exports use PascalCase for classes/components (`SyntheticClaudeApp`) and camelCase for functions/constants. Prefer async/await, narrow Zod schemas at module boundaries, and route CLI output through Ink/Chalk helpers instead of `console.log`. Always run ESLint and Prettier before committing so generated code matches project baselines.

## Testing Guidelines
Tests use Jest with `ts-jest` (configured in `jest.config.js`). Place new unit tests alongside the module under `src/**/__tests__` or extend the suites in `tests/`. Use the setup helper in `tests/setup.ts` for shared mocks. Before opening a PR, run `npm run test:coverage` and verify new modules are included in `collectCoverageFrom`; add targeted tests so coverage does not regress. Name test files `*.test.ts` and describe behaviors (“should refresh cached models”) rather than implementation detail.

## Commit & Pull Request Guidelines
Recent commits follow short, imperative subjects (e.g., `Fix remaining repository URL references`); keep them under ~72 characters with optional context after a dash. Group related changes into logical commits and avoid generated artifacts. Pull requests should include: (1) a concise summary of the feature or fix, (2) links to any tracked issues, (3) screenshots or CLI transcripts when UI or installer behavior changes, and (4) a checklist of commands run (`npm test`, `npm run lint`, etc.). Mention config or security impacts explicitly.

## Security & Configuration Tips
Never hard-code Synthetic API keys; rely on the interactive `synclaude setup` flow, which persists data under `~/.config/synclaude`. When touching Docker or installer scripts, double-check executable bits and avoid leaking secrets in logs. For local debugging, prefer `SYCLAUDE_LOG_LEVEL=debug` (see `config/`) instead of scattering console statements, and scrub credentials from sample configs before committing.
